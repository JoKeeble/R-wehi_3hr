---
layout: topic
title: Starting with data
author: Data Carpentry contributors
minutes: 20
---

```{r, echo=FALSE, purl=FALSE, message = FALSE}
source("setup_wehi.R")
```

------------

> ## Learning Objectives
>
> * load external data (CSV files) in memory using the cytokine table
>  (`cytokines.csv`) as an example
> * explore the structure and the content of the data in R
> * understand what are factors and how to manipulate them

------------

# Presentation of Cytokine Data

```{r, echo=FALSE, purl=TRUE}
### Presentation of cytokine data
```

Cytokine levels were measured in serum collected from "control", "infection_A", and "infection_B" patients.
The dataset is stored as a `csv` file: each row holds information for a single patient, and the columns represent:

| Column           | Description                        |
|------------------|------------------------------------|
| patient_id       | unique id for each patient         |
| group            | status of patient                  |
| IL17F            | concentration of IL17F             |
| IL17A            | concentration of IL17A             |
| GMCSF            | concentration of GMCSF             |
| IL2              | concentration of IL2               |
| CXCL9            | concentration of CXCL9             |
| CXCL10           | concentration of CXCL10            |
| ENA78            | concentration of ENA78             |
| IL4              | concentration of IL4               |


Use the R function `download.file()` to download the CSV file
that contains the cytokine data from figshare, and use `read.csv()` to
load into memory (as a `data.frame`) the content of the CSV file:

- First, make sure you are in the correct working directory by typing `getwd()`.
- Second, create a new directory within this working directory called `data`. You
can do this by clicking on the new folder icon in RStudio under the file tab, or
by typing `dir.create("data")` at the terminal.
- Third, download the data:

```{r, eval=FALSE, purl=TRUE}
download.file("http://files.figshare.com/2441263/cytokines.csv",
              "data/cytokines.csv")
```

You are now ready to load the data:

```{r, eval=TRUE,  purl=FALSE}
cytokines <- read.csv('data/cytokines.csv')
```

This statement doesn't produce any output because assignment doesn't display
anything. If we want to check that our data has been loaded, we can print the
variable's value: `cytokines`

Alternatively, wrapping an assignment in parentheses will perform the assignment
and display it at the same time.

```{r, eval = TRUE, purl = FALSE}
(cytokines <- read.csv('data/cytokines.csv'))
```

Check the top (the first 6 lines) of this `data.frame` using the
function `head()`:

```{r, results='show', purl=FALSE}
head(cytokines)
```

Let's now check the __str__ucture of this `data.frame` in more details with the
function `str()`:

```{r, purl=FALSE}
str(cytokines)
```

### Challenge

Based on the output of `str(cytokines)`,

* What is the class of the object `cytokines`?
* How many rows and how many columns are in this object?
* How many patient groups have been tested?

```{r, echo=FALSE, purl=TRUE}

## Challenge
## Based on the output of `str(cytokines)`, 

## * What is the class of the object `cytokines`?
## * How many rows and how many columns are in this object?
## * How many patient groups have been tested?

```



## Factors

```{r, echo=FALSE, purl=TRUE}
### Factors
```

Factors are used to represent categorical data. Factors can be ordered or
unordered and are an important class for statistical analysis and for plotting.

Factors contain a pre-defined set values, known as *levels*. By default, R always sorts *levels* in alphabetical order. For instance, if you have a factor with 2 levels:

```{r, purl=TRUE}
cell <- factor(c("neutrophil", "eosinophil", "eosinophil", "neutrophil"))
```

R will assign `1` to the level `"eosinophil"` and `2` to the level `"neutrophil"` (because `e` comes before `n`, even though the first element in this vector is `"neutrophil"`). You can check this by using the function `levels()`, and check the number of levels using `nlevels()`:

```{r, purl=FALSE}
levels(cell)
nlevels(cell)
```


### Converting factors 

If you need to convert a factor to a character vector, simply use
`as.character(x)`.
